<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Lista de animes e mangás">
    <meta name="author" content="Edivaldo">
    <link rel="shortcut icon" href="./icones/icons8-naruto-sign-210.png" type="image/x-icon">

    <link rel="stylesheet" href="./anime.css">

    <title>Mangás</title>
</head>

<body>
    <!--Menu de navegação-->
    <nav>
        <a href="./index.html" id="menu_anime">Anime</a>
        <a href="#" id="menu_manga">Mangá</a>
    </nav>

    <!--bara de pesquisa-->
    <div id="div_de_pesquisa">
        <form action="" method="get">
            <input type="search" name="" id="bara_de_pesquisa" placeholder="Pesquise">
        </form>
    </div>


    <h1>Minha lista de <span>Mangás</span></h1>

    <!--Tabela-->
    <table>
        <thead>
            <tr>
                <th>Nome</th>
                <th>Autor</th>
            </tr>
        </thead>
        <tbody id="corpo_tabela_animes">

            <tr>
                <td><a href="./detalhe.html">One Piece</a></td>
                <td>Aiichiro Oda</td>
            </tr>
            <tr>
                <td><a href="./detalhe.html">Fairy Tail</a></td>
                <td>Mashima</td>
            </tr>
            <tr>
                <td><a href="./detalhe.html">Noragami</a></td>
                <td>Hitome</td>
            </tr>
            <tr>
                <td><a href="./detalhe.html">Overlord</a></td>
                <td>Naoyuki</td>
            </tr>
        </tbody>


    </table>
    
    <!--Pagination-->
    <div class="pagination">
        <a href="#">&laquo;</a>
        <a href="#">1</a>
        <a class="active" href="#">2</a>
        <a href="#">3</a>

        <a href="#">&raquo;</a>
    </div>


    
    <script>

        function buildList() {
            var tabela = document.querySelector('table > tbody');


            var url = 'http://127.0.0.1:8000/manga-list/'

            fetch(url)
                .then((resp) => resp.json())
                .then(function (data) {
                    console.log('Data:', data)
                    var manga = data
                    for (let i in manga) {
                        tabela.innerHTML += `<tr><td><a href="./detalhe.html?id=${manga[i].id}&tipo=manga">${manga[i].nome} aaa</a></td><td>${manga[i].autor.nome}</td> </tr>`
                    }


                })

        }

        buildList()

    </script>


</body>

</html>